# Dockerfile-api - UH Groupings API - hot update the container

# Base image for building the project
FROM rockylinux/rockylinux:8 as build

# Install Java and Maven
RUN dnf -y module enable maven:3.6 \
    && dnf -y install maven java-17-openjdk-devel \
    && dnf clean all

# Set the working directory in the container
WORKDIR /app

# Assuming the source code will be mounted, no need to clone
# Just prepare the environment for building the project

# Build command commented out; to be run manually if needed
# RUN mvn clean install -DskipTests

# Base image for running the application
FROM rockylinux/rockylinux:8

# Install Java Runtime
RUN dnf -y install java-17-openjdk \
    && dnf clean all

# Prepare to receive the built jar file, assuming it will be added via volume or build
WORKDIR /app

# Command to run the application (assumes a built jar is present)
CMD ["java", "-jar", "groupings-api.jar"]
